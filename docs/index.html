<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>Шкатулка графов</title>
    <link rel="stylesheet" href="app.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
</head>

<body>
    <div id="app">
        <h1>Шкатулка графов</h1>
        <my-editor v-bind:nodes="nodes" v-bind:edges="edges" v-on:deleted-elements="on_deleted_elements"></my-editor>
        <my-text v-bind:nodes="nodes" v-bind:edges="edges" v-on:add-node="on_add_node"></my-text>
        <div>
            <h2>Управление</h2>
            <p>Клик левой кнопкой &mdash; выделить вершину или ребро.</p>
            <p>Перетаскивание левой кнопкой &mdash; сдвинуть вершины или весь граф.</p>
            <p>Колесо мыши &mdash; приблизить или отдалить.</p>
            <p>Delete или Backspace &mdash; удалить выделенные вершины и рёбра.</p>
        </div>
        <div>
            <h2>Исходный код</h2>
            <p>
                <a href="https://github.com/kinrany/graphoid-web">github.com/kinrany/graphoid-web</a>
            </p>
        </div>
    </div>
</body>

<template id="editor-template">
    <div>
        <div id="editor" tabindex="-1" v-on:keydown="on_keydown"></div>
        <p>
            <button v-on:click="delete_selected()" class="pure-button">Удалить</button>
        </p>
        <p>
            <button v-on:click="save_png()" class="pure-button">Сохранить изображение</button>
        </p>
    </div>
</template>

<template id="text-template">
    <div>
        <h4>Матрица смежности</h4>
        <table class="pure-table pure-table-striped">
            <thead>
                <th>из \ в</th>
                <th v-for="node in nodes">
                    {{node.data.id}}
                </th>
            </thead>
            <tr v-for="(line, index) in matrix">
                <td>
                    <span style="text-align: center; vertical-align: middle; font-weight: bold">{{nodes[index].data.id}}</span>
                </td>
                <td v-for="cell in line">
                    {{cell ? 'X' : ' '}}
                </td>
            </tr>
        </table>
        <p>
            <button v-on:click="$emit('add-node')" class="pure-button">Добавить вершину</button>
        </p>
    </div>
</template>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.2.8/cytoscape.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.7/download.min.js"></script>
<script src="app.js"></script>

</html>