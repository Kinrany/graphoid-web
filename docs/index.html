<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>Шкатулка графов</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="app.css">
</head>

<body>
    <div id="app" class="pure-g">
        <h1 class="pure-u-1">Шкатулка графов</h1>
        <my-editor :graph="graph" @deleted-elements="on_deleted_elements" class="pure-u-1 pure-u-xl-1-2"></my-editor>
        <my-text :graph="graph" @add-node="on_add_node" @load="on_load" class="pure-u-1 pure-u-xl-1-2"></my-text>
    </div>
    <div class="pure-g">
        <div class="pure-u-1">
            <h2>Управление</h2>
            <p>Клик левой кнопкой &mdash; выделить вершину или ребро.</p>
            <p>Перетаскивание левой кнопкой &mdash; сдвинуть вершины или весь граф.</p>
            <p>Колесо мыши &mdash; приблизить или отдалить.</p>
            <p>Delete или Backspace &mdash; удалить выделенные вершины и рёбра.</p>
        </div>
        <div class="pure-u-1">
            <h2>Исходный код</h2>
            <p>
                <a href="https://github.com/kinrany/graphoid-web">github.com/kinrany/graphoid-web</a>
            </p>
        </div>
    </div>
</body>

<template id="editor-template">
    <div>
        <div id="editor" tabindex="-1" @keydown="on_keydown"></div>
        <p>
            <button @click="delete_selected()" class="pure-button">Удалить</button>
        </p>
        <p>
            <button @click="save_png()" class="pure-button">Сохранить изображение</button>
        </p>
    </div>
</template>

<template id="text-template">
    <div>
        <h3>Текстовое представление</h3>
        <p>
            <button @click="$emit('add-node')" class="pure-button">Добавить вершину</button>
        </p>
        <h4>Матрица смежности</h4>
        <table class="pure-table pure-table-striped">
            <thead>
                <th>из \ в</th>
                <th v-for="node in nodes">
                    {{node.data.id}}
                </th>
            </thead>
            <tr v-for="(line, index) in matrix">
                <td>
                    <b>{{nodes[index].data.id}}</b>
                </td>
                <td v-for="cell in line">
                    {{cell ? 'X' : ' '}}
                </td>
            </tr>
        </table>
        <textarea v-model="text" class="pure-input-1"></textarea>
        <p>
            <button @click="on_load" class="pure-button">Загрузить</button>
        </p>
    </div>
</template>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.5/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.2.8/cytoscape.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/downloadjs/1.4.7/download.min.js"></script>
<script src="monkeypatch.js"></script>
<script src="cygraph.js"></script>
<script src="components/editor.js"></script>
<script src="components/text.js"></script>
<script src="app.js"></script>

</html>